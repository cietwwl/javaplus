//package cn.mxz.equipment;////import java.util.List;////import message.S;//import cn.mxz.EquipmentAdvancedTemplet;//import cn.mxz.EquipmentAdvancedTempletConfig;//import cn.mxz.EquipmentTemplet;//import cn.mxz.EquipmentTempletConfig;//import cn.mxz.base.ServerCommand;//import cn.mxz.base.exception.ClientException;//import cn.mxz.base.exception.IllegalOperationException;//import cn.mxz.base.exception.OperationFaildException;//import cn.mxz.city.PlayerProperty;//import cn.mxz.user.City;//import cn.mxz.util.counter.CounterKey;//import cn.mxz.util.counter.UserCounterSetter;//import cn.mxz.util.needs.Deductor;//import cn.mxz.util.needs.NeedsChecker;//import cn.mxz.util.needs.NeedsFactory;/////**// * 装备合成, 其实只是个进阶功能// *// * @author 林岑// *// *///class EquipmentGeneratorCommand implements ServerCommand {////	private City		city;////	private Equipment	equipment;////	EquipmentGeneratorCommand(Equipment equipment, City city) {////		this.equipment = equipment;////		this.city = city;//	}////	@Override//	public void check() {////		checkCanGenerator();////		checkProp();//	}////	private void checkProp() {////		EquipmentAdvancedTemplet t = getTemp();////		NeedsChecker c = NeedsFactory.getNeedsCheckerImpl2(t.getStuffId(), t.getNeeds());////		try {//			c.check(city.getPlayer());//		} catch (ClientException e) {//			throw new OperationFaildException(S.S10259);     -------throw new OperationFaildException(S.S10260);     -------throw new (S.S10279);     -------道具不够, 请前往掠夺//		}////		city.getChecker().checkPlayerProperty(PlayerProperty.CASH, t.getAttackMixtureCashNeed());//	}////	/**//	 * 检查是否可以进阶//	 *///	private void checkCanGenerator() {////		EquipmentAdvancedTemplet adTemp = getTemp();////		if (adTemp.getQualityBack() == -1 || adTemp.getQualityBack() == 0) {////			throw new OperationFaildException(S.S10101);//		}////		// int strengthen = adTemp.getStrengthen();//		////		// if(equipment.getLevel() < strengthen) {//		////		// throw new OperationFaildException(S.S10102, strengthen);//		// }//	}////	private EquipmentAdvancedTemplet getTemp() {////		EquipmentTemplet temp = EquipmentTempletConfig.get(equipment.getTypeId());////		if (temp == null) {//			throw new NullPointerException(equipment.getTypeId() + "");//		}////		int quality = temp.getQuality();////		EquipmentAdvancedTemplet adTemp = getTemp(quality);////		return adTemp;//	}////	/**//	 * 进阶模板//	 *//	 * @param quality//	 * @return//	 *///	private EquipmentAdvancedTemplet getTemp(int quality) {////		List<EquipmentAdvancedTemplet> findByQualityAgo = EquipmentAdvancedTempletConfig.findByQualityAgo(quality);////		for (EquipmentAdvancedTemplet et : findByQualityAgo) {////			int part = et.getPart();////			if (equipment.getAdditionType() == part) {////				return et;//			}//		}////		throw new IllegalArgumentException(quality + "");//	}////	@Override//	public void run() {////		EquipmentAdvancedTemplet t = getTemp();////		city.getPlayer().reduce(PlayerProperty.CASH, t.getAttackMixtureCashNeed());////		Deductor c = NeedsFactory.getNeedsCheckerImpl2(t.getStuffId(), t.getNeeds());////		try {//			c.deduct(city.getPlayer());//		} catch (ClientException e) {//			throw new (S.S10280);     -------道具不够, 请前往掠夺//		}////		equipment.qualityLevelUp();////		UserCounterSetter uc = city.getUserCounterHistory();////		uc.add(CounterKey.GENERATE_EQUIPMENT_COUNT, 1);////		CounterKey ck = CounterKey.EQUIPMENT_GENERATE_COUNT;////		city.getUserCounterHistory().add(ck, 1);//	}////}